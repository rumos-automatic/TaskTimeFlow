# 📋 TaskTimeFlow - Change Log

すべての重要な変更がこのファイルに記録されます。

フォーマットは [Keep a Changelog](https://keepachangelog.com/ja/1.0.0/) に基づいており、
このプロジェクトは [Semantic Versioning](https://semver.org/lang/ja/) に準拠しています。

## [Unreleased]

### 🚀 計画中の機能
- Google Calendar/Tasks API連携
- マルチAI統合（OpenAI、Claude、Gemini）
- Supabase BaaS統合
- PWA対応
- チーム機能

---

## [0.4.0] - 2025-06-26

### ✨ 追加
- **📱 iOS風モバイルドラッグ&ドロップ完全実装**
  - 300ms → 150ms長押しでドラッグ開始
  - TouchSensor最適化（distance制約、tolerance調整）
  - ハプティックフィードバック対応
  - PC版と同等のスムーズなドラッグ体験
- **🔄 クロスビュードラッグ機能**
  - タスクプール ⇄ タイムライン間のビュー跨ぎドラッグ
  - エッジプル機能による画面端でのビュー切り替え
  - ドラッグ状態維持でのシームレスな操作
- **🔄 手動更新ボタン**
  - ヘッダー右上に控えめな更新ボタン配置
  - プルトゥリフレッシュ無効化の代替手段
  - ワンタップでページリロード
- **⏰ 精密な現在時刻表示**
  - 分単位での正確な位置表示
  - デジタル時計風HH:MM表示
  - 時間軸列内への最適配置
  - 自然な青色デザインに変更

### 🔄 変更
- **🎯 ドラッグ&ドロップ精度向上**
  - collision detection: closestCenter → pointerWithin
  - ドロップターゲット位置の正確な認識
  - クロスビュー処理の優先順位最適化
- **📱 モバイル操作性大幅改善**
  - スクロールロック軽量化（touch-action制限除去）
  - プルトゥリフレッシュ競合完全解決
  - タイムライン内ドラッグ修正
- **🎨 視覚的フィードバック強化**
  - ドラッグオーバーレイの改善（rotation、scale、shadow）
  - エッジプルインジケーター
  - クロスビュードロップの視覚的フィードバック

### 🐛 修正
- **🔧 TypeScriptエラー解決**
  - Vercel本番ビルドエラー修正
  - item.task undefined チェック追加
- **📱 passive event listenerエラー解決**
  - CSS基準のアプローチに変更
  - イベントリスナー削除でパフォーマンス向上
- **🎯 ドロップ位置精度修正**
  - 青い点線インジケーター位置での正確配置
  - 現在時刻固定問題の解決

### 🛠️ 技術的改善
- SortableContext追加でタイムライン内ドラッグ有効化
- TouchSensor設定最適化（delay、tolerance、distance）
- useScrollLock、usePullToRefreshBlocker軽量化
- DragOverlay z-index最適化
- 現在時刻計算ロジック改善

---

## [0.3.0] - 2025-01-25

### ✨ 追加
- **📝 タスクCRUD機能**
  - インラインフォームによるタスク追加
  - 優先度設定（高・中・低）
  - カテゴリ分類（仕事・個人・カスタム）
  - 予想時間設定
  - タスク完了機能
- **🎯 ドラッグ&ドロップ機能**
  - @dnd-kit/coreを使用した完全なドラッグ&ドロップ
  - タスクプールからタイムラインへのシームレス移動
  - ドロップ時の視覚的フィードバック
  - ドラッグオーバーレイでのプレビュー表示
- **⏰ Pomodoroタイマー機能**
  - 25分集中サイクル + 5分/15分休憩
  - 開始・一時停止・再開・停止操作
  - 進捗リング表示とカウントダウン
  - タスクとの連動
  - 完了時のブラウザ通知
- **🏪 Zustand状態管理**
  - タスクとタイマーの完全な状態管理
  - LocalStorageでの永続化
  - TypeScript型安全性の保証
- **📊 リアルタイム統計**
  - 本日の完了/進行中タスク数
  - ポモドーロ完了回数
  - 日次進捗表示

### 🔄 変更
- **🎨 UIコンポーネント統合**
  - task-pool.tsx: 実データ連携とCRUD機能
  - timeline.tsx: ドロップゾーン実装
  - focus-mode.tsx: タイマー機能統合
  - workspace-new.tsx: DndContext統合

### 🛠️ 技術的改善
- TypeScript型定義の完全実装
- @dnd-kit/sortableとの統合
- エラーハンドリングの改善
- パフォーマンス最適化

---

## [0.2.1] - 2025-01-24

### 🐛 修正
- **📱 タッチジェスチャー修正**
  - カスタムuseSwipeフック実装
  - ネイティブtouchイベントでの50px閾値設定
  - スワイプレスポンス速度向上

### 🔄 変更
- **⚡ アニメーション削除**
  - ビュー切り替えの即座反映
  - UX改善のための遅延除去
- **📱 モバイルナビゲーション修正**
  - フッターナビゲーションのz-index修正
  - タップイベントの停止伝播追加

---

## [0.2.0] - 2025-01-23

### ✨ 追加
- **📱 レスポンシブ3画面システム**
  - モバイル：単一ビュー + スワイプナビゲーション
  - デスクトップ：デュアルビュー（タスク+タイムライン）
  - フォーカスモード：集中作業用全画面表示
- **🌐 完全日本語ローカライゼーション**
  - 全UIテキストの日本語化
  - 日本語フォント最適化
  - 日本の作業文化に適応した用語選択
- **🎨 デザインシステム改善**
  - shadcn/ui統合
  - Tailwind CSS変数システム
  - glassmorphismテーマ

### 🔄 変更
- **📐 UI構造の完全リファクタリング**
  - workspace-new.tsx: 3画面対応
  - useViewStateフック: ビュー状態管理
  - レスポンシブブレークポイント最適化

---

## [0.1.0] - 2025-01-22

### ✨ 追加
- **🏗️ 基本アーキテクチャ構築**
  - Next.js 14 + App Router
  - TypeScript完全対応
  - Vercelデプロイメント設定
- **🎨 初期UIコンポーネント**
  - TaskPool（タスクプール）
  - Timeline（タイムライン）
  - FocusMode（フォーカスモード）
- **📱 レスポンシブ対応**
  - モバイルファーストデザイン
  - shadcn/ui統合
  - Tailwind CSS設定

### 🛠️ 技術基盤
- Vercel自動デプロイ設定
- ESLint + Prettier
- TypeScript設定最適化

---

## 📊 プロジェクト統計

### 🎯 完了機能（v0.4.0時点）
- ✅ **レスポンシブUI** - 3画面システム
- ✅ **日本語対応** - 完全ローカライゼーション
- ✅ **ドラッグ&ドロップ** - タスク⇄タイムライン
- ✅ **モバイルドラッグ** - iOS風長押し+ハプティック
- ✅ **クロスビュードラッグ** - ビュー間移動
- ✅ **エッジプル** - 画面端でのビュー切り替え
- ✅ **Pomodoroタイマー** - 集中作業支援
- ✅ **タスクCRUD** - 作成・更新・削除・完了
- ✅ **現在時刻表示** - 分単位精密表示
- ✅ **状態管理** - Zustand + 永続化
- ✅ **型安全性** - TypeScript完全対応

### 🚧 開発中機能
- 🔄 Google Calendar/Tasks API連携
- 🔄 Supabase BaaS統合
- 🔄 AI機能（OpenAI・Claude・Gemini）
- 🔄 リアルタイム同期
- 🔄 PWA対応

### 📈 技術メトリクス
- **TypeScript カバレッジ**: 100%
- **コンポーネント数**: 8個
- **ページ数**: 1個（SPA）
- **ビルドサイズ**: ~171KB (First Load JS)
- **Lighthouse スコア**: 95+ (Performance)
- **モバイル操作性**: iOS風ドラッグ&ドロップ完全対応
- **クロスプラットフォーム**: PC/スマホ同等体験

---

## 🤝 コントリビューション

変更履歴の更新方法：
1. [Keep a Changelog](https://keepachangelog.com/ja/1.0.0/) フォーマットに従う
2. バージョンは [Semantic Versioning](https://semver.org/lang/ja/) に準拠
3. 変更は `Unreleased` セクションに追加
4. リリース時に適切なバージョン番号セクションを作成

## 📝 変更カテゴリ

- **✨ 追加 (Added)** - 新機能
- **🔄 変更 (Changed)** - 既存機能の変更
- **⚠️ 非推奨 (Deprecated)** - 今後削除予定の機能
- **🗑️ 削除 (Removed)** - 削除された機能
- **🐛 修正 (Fixed)** - バグ修正
- **🔒 セキュリティ (Security)** - セキュリティ関連の修正